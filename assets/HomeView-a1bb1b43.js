import{M as y}from"./modal-c60aad6a.js";import{o as n,c as l,a as t,t as s,F as m,r as b,_ as g,b as f,d as $,e as r,n as x}from"./index-492fd83b.js";const T={class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"userProductModal"},P={class:"modal-dialog modal-xl",role:"document"},k={class:"modal-content border-0"},E={class:"modal-header bg-dark text-white"},V={class:"modal-title",id:"exampleModalLabel"},I=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),M={class:"modal-body text-start"},C={class:"row"},U={class:"col-sm-6"},D=["src"],w={class:"col-sm-6"},L={class:"badge bg-primary rounded-pill"},R={key:0,class:"h5"},A={key:1},H={class:"h6"},B={class:"h5"},S={class:"input-group"},O={name:"",id:"",class:"form-select"},F=["value"];function N(o,a,u,i,e,_){return n(),l("div",T,[t("div",P,[t("div",k,[t("div",E,[t("h5",V,[t("span",null,s(e.product.title),1)]),I]),t("div",M,[t("div",C,[t("div",U,[t("img",{class:"img-fluid",src:e.product.imageUrl,alt:""},null,8,D)]),t("div",w,[t("span",L,s(e.product.category),1),t("p",null,"商品描述："+s(e.product.description),1),t("p",null,"商品內容："+s(e.product.content),1),e.product.price===e.product.origin_price?(n(),l("div",R,s(e.product.price)+" 元",1)):(n(),l("div",A,[t("del",H,"原價 "+s(e.product.origin_price)+" 元",1),t("div",B,"現在只要 "+s(e.product.price)+" 元",1)])),t("div",null,[t("div",S,[t("select",O,[(n(),l(m,null,b(20,c=>t("option",{value:c,key:c},s(c),9,F)),64))]),t("button",{type:"button",class:"btn btn-primary",onClick:a[0]||(a[0]=c=>u.addToCart(e.product.id))},"加入購物車")])])])])])])])],512)}const{VITE_URL:q,VITE_PATH:z}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"key0329",VITE_TEXT:"這是產品的環境",BASE_URL:"/2022-Vue-week5/",MODE:"production",DEV:!1,PROD:!0},X={props:{tempProductId:{type:String,required:!0},addToCart:{type:Function}},data(){return{modal:{},product:{},qty:1}},watch:{tempProductId(){this.$http.get(`${q}/api/${z}/product/${this.tempProductId}`).then(o=>{this.product=o.data.product,this.openModal()}).catch(o=>{alert(o.response.data.message)})}},methods:{openModal(){this.modal.show()},closeModal(){this.modal.hide()}},mounted(){this.modal=new y(this.$refs.userProductModal)}},j=g(X,[["render",N]]),{VITE_URL:p,VITE_PATH:h}={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"key0329",VITE_TEXT:"這是產品的環境",BASE_URL:"/2022-Vue-week5/",MODE:"production",DEV:!1,PROD:!0},G={components:{UserProductModalComponent:j},data(){return{products:[],tempProductId:""}},methods:{getProductsData(){this.$http.get(`${p}/api/${h}/products/all`).then(o=>{this.products=o.data.products}).catch(o=>{alert(o.response.data.message)})},getProductDetail(o){this.tempProductId=o},addToCart(o,a=1){const u={product_id:o,qty:a};this.$http.post(`${p}/api/${h}/cart`,{data:u}).then(i=>{console.log(i.data.data),this.$refs.userProductModal.closeModal()}).catch(i=>{alert(i)})}},mounted(){this.getProductsData()}},J={class:"container"},K={class:"mt-4"},Q={class:"table align-middle"},W=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),Y={style:{width:"200px"}},Z={key:0,class:"h5"},tt={key:1},st={class:"h6"},et={class:"h5"},ot={class:"btn-group btn-group-sm"},dt=["onClick"],nt=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),lt=["onClick"],ct=t("i",{class:"fas fa-spinner fa-pulse"},null,-1),at=t("div",{class:"text-end"},[t("button",{class:"btn btn-outline-danger",type:"button"},"清空購物車")],-1),it={class:"table align-middle"},rt=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",null,"單價")])],-1),ut=t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm"},[t("i",{class:"fas fa-spinner fa-pulse"}),r(" x ")])],-1),_t=t("div",{class:"text-success"},"已套用優惠券",-1),pt={class:"input-group input-group-sm"},ht={class:"input-group mb-3"},mt=t("input",{min:"1",type:"number",class:"form-control"},null,-1),bt={class:"input-group-text",id:"basic-addon2"},gt={class:"text-end"},vt=t("small",{class:"text-success"},"折扣價：",-1),yt=t("td",{colspan:"3",class:"text-end"},"總計",-1),ft={class:"text-end"},$t=t("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),xt={class:"text-end text-success"};function Tt(o,a,u,i,e,_){const c=f("UserProductModalComponent");return n(),l("div",J,[t("div",K,[$(c,{ref:"userProductModal","temp-product-id":e.tempProductId,"add-to-cart":_.addToCart},null,8,["temp-product-id","add-to-cart"]),t("table",Q,[W,t("tbody",null,[(n(!0),l(m,null,b(e.products,d=>(n(),l("tr",{key:d.id},[t("td",Y,[t("div",{style:x([{height:"100px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${d.imageUrl})`}]),alt:""},null,4)]),t("td",null,s(d.title),1),t("td",null,[d.price===d.origin_price?(n(),l("div",Z,s(d.price)+" 元 ",1)):(n(),l("div",tt,[t("del",st,"原價 "+s(d.origin_price)+" 元",1),t("div",et,"現在只要 "+s(d.price)+" 元",1)]))]),t("td",null,[t("div",ot,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:v=>_.getProductDetail(d.id)},[nt,r(" 查看更多 ")],8,dt),t("button",{type:"button",class:"btn btn-outline-danger",onClick:v=>_.addToCart(d.id)},[ct,r(" 加到購物車 ")],8,lt)])])]))),128))])]),at,t("table",it,[rt,t("tbody",null,[t("tr",null,[ut,t("td",null,[r(s()+" ",1),_t]),t("td",null,[t("div",pt,[t("div",ht,[mt,t("span",bt,s(),1)])])]),t("td",gt,[vt,r(" "+s(),1)])])]),t("tfoot",null,[t("tr",null,[yt,t("td",ft,s(),1)]),t("tr",null,[$t,t("td",xt,s(),1)])])])])])}const Et=g(G,[["render",Tt]]);export{Et as default};
